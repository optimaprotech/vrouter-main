<p align="center" style="padding: 20px;" xmlns="http://www.w3.org/1999/html">
<img src="https://raw.githubusercontent.com/lulupointu/vrouter_website/master/assets/logo_whole.svg" alt="VRouter logo" height="100"/>
</p>

<p align="center">
<a style="padding: 10px;" href="https://vrouter.dev"><img alt="VRouter website" src="https://img.shields.io/badge/doc-online-brightgreen?link=https://vrouter.dev&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAACdAAAAtQHSL0nEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABGJJREFUaIHNmstvG1UUh787xeM7DlGEFKTWIcFOUhUFlCZ2Xn5EaZoEsaGrpPwFSIUFCFQeCx4thSUbJIQq1D0ibhds0qZpS9t4gSh9BcQ/gkpQiC+LxGkeHt8z4xmJn2TJnjn3nPvzpzP3zthqfnV9CcU4jeUAHYD56bsf/tzY2BjwiQPAGM7y45tfN4vZ0envP1eKc81CXNf9/fUzb7wiyHbXAb4BnvN5dWwHqsGp0b9s2ZTiYxa+fdZaduFih1K8awvLzRY2rLkAhTnnVMp6CaV+sQVnBvrGEsnEH5awTg4lz1grH3LeY+uL8lVCJ9a6+nuGbamUobpY8m46ANTMeWtxYHBy5Ik9sfmoKZWFix3K8I4tT36m+K9kTijzGWz1AJWyXlKGqm1MZqB/VETFcd/yPSul0SenAdtGAAx8ZRsIcHxq3E4FPmxIRUhjZLa0KZnLJubT+vsdI1IqL76UHU24IakIaLg6sZbu7R6yzUMZqlfK3q36Z2fPWYcvbQkAhk4IqZy61L5zQNobc8FpwD4ji0V9FVi1JemRUtHmKRURjeTjdDY4DdhPBFBK1itD02N/Wwsq8wGnLrXLr1QFI6ltjPlk/7EDRsRUjvWOJHRizRLWSWrzbcdR72Oj4bkP033dx211laFamfR+3n/8gBEIQGVq4h97YXXWoKyr+MjspKRkQxrgY0ROJTPi6uRjS1gnT7c6DaW1fnAkmxb1RiMa4GMEglAZFe2Hmik3V/Sdx2750YAmRqRUuo9l8wIqvtKp5IMj2S57b8AtPxrQxAiAUcJ1ZXoiNJXcTElEA9V8P9g0yeWivoaEytGevJt0A1PRKe++lMZi0bvdLMb6bYipnByX7VZ3KT9beEYUaKEBAiNyKplcECra0/cPZ7oGbXESGiAwAnIqwwGo5OeKkdEAoREplReOZnKul3xki9Nt3m8SGsBNCQ0QGtnWBUnQ8Ikx6+41P1NISHIpZb6QxEEAI5WSXgbu2uJsVOKgAcGIALJeyU1P1PzOSWnUkPVGXYGMSKl09fcMN6LitaXuCWncuFLy7gSZW1AiIKVy8iCV0ddKnmRsDXlv1BXYiJhK314qXlvq3vNdh18WlAhMA8IRASGV3Xd8cdKAkEakVNK93UOu1g+99tSvEhrKsBKGBoBsdW1c9IJRLNvi8jMTKuG6KVnWYFeqPfMJOxBgvrp+B5Ddo9omYlhZLOu5sOPD9ki9uGi1l2hTmZZytUQEIqNyvVLSr7aSoCUiEBEV0xoNiIAItEylZRoQAREA4xDq2r81uHUaEJGRywW9oiDM9f96pexZ1yOJIjECUHNC9EpENCBCIyGoLEdFAyI0AgGpGCPar0kVqZEAVCKlAREbARkVFWFv1BW5ERsVBdcWy571iUxQRW4EwDR7+hFxb9QVi5FK0bvRiEpcNCAmI+BDJSYaEKORA1QMV+OiATEagb1UFEb0C9j/VgvV9dvzq+tLcdcJfc8ulzlfw1j/KdGq/gO/0V+vSHNXPQAAAABJRU5ErkJggg=="></a>
<a style="padding: 10px;" href="https://discord.gg/2mua42F66P"><img alt="Join our discord" src="https://img.shields.io/discord/837286025775808543?logo=discord&link=https://discord.gg/2mua42F66P"></a>
<a style="padding: 10px;" href="https://github.com/lulupointu/vrouter"><img alt="Github repo" src="https://img.shields.io/github/stars/lulupointu/vrouter?label=stars&logo=github&link=https://github.com/lulupointu/vrouter"></a>
<a style="padding: 10px;" href="https://pub.dev/packages/vrouter"><img alt="pub package" src="https://img.shields.io/badge/dynamic/json?link=https://pub.dev/packages/vrouter&label=likes&query=%24.score.likeCount&url=https%3A%2F%2Fpub.dev%2Fapi%2Fpackages%2Fvrouter%2Fmetrics&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABQVBMVEUAAABAxv9Axf9Axf9AxP88w/9CzP9Ax/9Cxv9Bxf9Bxv9E3f8mjMwtnNk0quYxpeEiiMwYg8IDWp4AVZkASpQRc7MCV5sAVJgCV5sAVZwAVZkAVZkBV5sCWJsAVpoAVpoCVpkBV5sCVpkCV5sAWJ4AVZgAR48RdbcCV5kfj8wqtPMXh8gDWZ0BVpoDVZczwv87wf47v/sfi8kAS48AUpQ9wv9AxP8/xP9Gyf9ExP9Axf9AxP9AxP9AxP9AxP9Bxf82r+o2ruoaickIYaQHXqAHX6EIYKIor+4VhscDWZ0CV5sDWJsCWJsBV5sObrAqs/IptPQWhsgEWp4DWJwEWZwqsvIrt/cqtPQXh8gFW54rt/Yst/YrtfQYh8gGXJ8AVpoqtvYDWp0psfErtvYCWZ0suPcst/crtfU9wv5AxP////8LycgWAAAAP3RSTlMAKJDamBEjf9r9mQ8UftybD32bDx/Ym3SZEh7R/aB8/N7W26odrhmw3Rmw/OnmxRmw6EIiHxmu5SEes+De38bQ2wz6AAAAAWJLR0RqJWKVDgAAAAd0SU1FB+UFBA0iFHhvObgAAACnSURBVBgZHcFBK0RRGIDh9z3nzJmbWCgySfaWQ5pk48cLGc1WypqVspHGXXy+O88jO05GkqSuK571BxD29RKBjd8gHC5Vki9+UTmqZ7XWlur5x/ArJyt3gi2ubafSTaMx30aztAYt7SGwrKXekSJiFqTSCikMIv5IxQfoBBFxjFDefTug92Go8bmALlx4KynKvVrgdbYuk2pPkq69YrLxCZncqKDjI/88GysD2R/3TgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wNS0wNFQxMzozNDoxOSswMDowMBjxzYEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDUtMDRUMTM6MzQ6MTkrMDA6MDBprHU9AAAAAElFTkSuQmCC"></a>
</p>

---


A Flutter package that makes navigation and routing easy.

**Learn more at [vrouter.dev](https://vrouter.dev)**

Here are a few things that this package will make easy:
* Automated web url handling
* Nesting routes
* Transition
* Advanced url naming
* Reacting to route changing
* Customizable pop events
* And much more...

# Index

- [Index](#index)
- [Getting started](#getting-started)
  - [VRouter](#vrouter)
  - [VRouteElements](#vrouteelements)
    - [VWidget](#vwidget)
    - [VGuard](#vguard)
    - [VRouteRedirector](#vrouteredirector)
    - [VNester](#vnester)
    - [VPopHandler](#vpophandler)
  - [Navigation](#navigation)
- [Useful notions](#useful-notions)
  - [Composition](#composition)
    - [Compose VRouteElements](#compose-vrouteelements)
    - [Create custom VRouteElements](#create-custom-vrouteelements)
  - [Path](#path)
    - [Relative path](#relative-path)
    - [Path parameters](#path-parameters)
    - [Wildcards](#wildcards)
    - [Path parameters regexp](#path-parameters-regexp)
    - [Aliases](#aliases)
  - [VRedirector](#vredirector)
  - [VRouterData](#vrouterdata)
- [Go Beyond](#go-beyond)
  - [Initial url](#initial-url)
  - [Logs](#logs)
  - [Named route](#named-route)
  - [Transitions](#transitions)
- [Much more](#much-more)


# Getting started

## VRouter

**VRouter** is a widget which handles the navigation, it acts as a MaterialApp but also takes a *routes* arguments.

```dart
VRouter(
 debugShowCheckedModeBanner: false, // VRouter acts as a MaterialApp
 routes: [...], // Put your VRouteElements here
)
```

## VRouteElements

`VRouteElements` are the building blocs of your routes.

Note that they are **not** widgets but the way you use them is *very similar* to widgets.

### VWidget

**VWidget** maps a path to a widget:

```dart
VWidget(path: '/login', widget: LoginScreen())
```

### VGuard

**VGuard** allows you to take actions when the route is accessed/leaved:

```dart
VGuard(
 beforeEnter: (vRedirector) async => , // Triggered when a route in stackedRoutes is first displayed
 beforeUpdate: (vRedirector) async => , // Triggered when a route in stackedRoutes is displayed but changes
 beforeLeave: (vRedirector, _) async => , // Triggered when VGuard is not part of a new route
 stackedRoutes: [...],
);
```

### VRouteRedirector

**VRouteRedirector** redirects from a route to another:
```dart
VRouteRedirector(path: '/old/home', redirectTo: '/home')
```

### VNester

**VNester** are used when you need to nested widgets instead of stacking them:
```dart
VNester(
 path: '/home',
 widgetBuilder: (child) => MyScaffold(body: child), // child will take the value of the widget in nestedRoutes
 nestedRoutes: [
   VWidget(path: 'profile', widget: ProfileScreen()), // path '/home/profile'
   VWidget(path: 'settings', widget: SettingsScreen()), // path '/home/settings'
 ],
)
```

### VPopHandler

**VPopHandler** helps you control pop events:
```dart
VPopHandler(
 onPop: (vRedirector) async =>, // Called when this VRouteElement is popped
 onSystemPop: (vRedirector) async =>, // Called when this VRouteElement is popped by android back button
 stackedRoutes: [...],
)
```

## Navigation

Navigating is easy, just access `VRouter` with `context.vRouter` and navigate:

```dart
context.vRouter.to('/home'); // Push the url '/home'

context.vRouter.toSegments(['home', 'settings']); // Push the url '/home/settings'
```

# Useful notions

## Composition

`VRouteElement`s are designed like widgets: compose them to create the route you need.

### Compose VRouteElements

To compose `VRouteElement`s, use the **stackedRoutes** attribute (or the **nestedRoutes** attribute for `VNester`):

```dart
// Composing a VGuard and a VWidget
VGuard(
 beforeEnter: (vRedirector) async => !isLoggedIn ? vRedirector.to('/login') : null,
 stackedRoutes: [
   VWidget(path: '/home', widget: HomeScreen()),
 ],
)
```

### Create custom VRouteElements

You can even create your own `VRouteElement`, as you extend `VWidget`. You just need to extends `VRouteElementBuilder`:

```dart
class HomeRoute extends VRouteElementBuilder {
 static String home = '/home';

 @override
 List<VRouteElement> buildRoutes() {
   return [
     VGuard(
       // LoginRoute.login = '/login' for example
       beforeEnter: (vRedirector) async => !isLoggedIn ? vRedirector.to(LoginRoute.login) : null,
       stackedRoutes: [
         VWidget(path: home, widget: HomeScreen()),
       ],
     ),
   ];
 }
}
```

and then use this `VRouteElement` as any other:

```dart
VRouter(
 routes: [
   HomeRoute(),
   ...
 ],
)
```

This can be used to:
 * Separate you different routes in different VRouteElement
 * Create reusable VRouteElement
 * Use `static String` to organise your paths

Note: you often want to use a shared `VNester` in different `VRouteElementBuilder`s, for this specific use case, see [vrouter.dev/Custom VRouteElement And Scaling](https://vrouter.dev/guide/Advanced/Custom%20VRouteElement%20And%20Scaling)

## Path

### Relative path

**Paths can be relative**: if you don’t start your path with `/`. If you use `null`, the path will be the one of the parent:

```dart
VNester(
 path: '/home',
 widgetBuilder: (child) => MyScaffold(body: child),
 nestedRoutes: [
   VWidget(path: null, widget: HomeScreen()), // Matches '/home'
   VWidget(path: 'settings', widget: SettingsScreen()), // Matches '/home/settings'
 ]
)
```

### Path parameters

**Paths can have path parameters**, just use “:” in front of the path parameter’s name:
```dart
VWidget(path: '/user/:id', widget: UserScreen())
```

And access it in your widgets using:
```dart
context.vRouter.pathParameters['id'];
```

### Wildcards

Wildcards are noted * and there are of one of two types:
  - Trailing wildcards (a path ending with *) will match everything
  - an in-path wildcard (a wildcard between slashes) will match one word

```dart
// Redirects any path to '/unknown'
VRouteRedirector(path: '*', redirectTo: '/unknown')
```

### Path parameters regexp

**Path parameters can use regex**, just put the regex in parentheses. This is often used in VRedirector to redirect any unknown route:

```dart
// The path parameter name is “bookId” and it uses the regex “\d+” to match only digits
VWidget(path: r':bookId(\d+)', widget: BookScreen())
```

Note that such a `VRedirector` should be used as your last `route` otherwise it will always be matched.

### Aliases

**Use aliases for multiple paths**:

```dart
// Matches '/settings' and '/other'
VWidget(path: '/settings', aliases: ['/other'], widget: SettingsScreen())
```


## VRedirector

You often want to redirect or stop the current redirection in `VGuard` and `VPopHandler`. For that purpose, you get a `VRedirector`:

```dart
VGuard(
 beforeEnter: (vRedirector) async => !isLoggedIn ? vRedirector.to('/login') : null,
 stackedRoutes: [...],
)
```

## VRouterData

VRouter contains data (such as the path or path parameters) that you might want to access in your widget tree. There are 2 ways of doing do:

```dart
// Use the context
context.vRouter

// Use the builder constructor of some VWidget or VNester
VWidget.builder(
  path: '/:id', 
  builder: (context, state) => Book(id: state.pathParameters['id'] as int),
)
```



# Go Beyond

We have just scratched the surface of what VRouter can do. Here are a few other things which you might like.


## Initial url

Maybe you want to redirect people to a certain part of your app when they first launch it, then use `initialUrl`:

```dart
VRouter(
 initialUrl: '/home',
 routes: [...],
)
```

## Logs

By default, VRouter shows logs of every navigation events.

You can *remove* these logs using `VLogs.none`:

```dart
VRouter(
  logs: VLogs.none,
  routes: [...],
);
```

## Named route

You might have to access a deeply nested VRouteElement and don’t want to have to write the full url. Just give a name to this VRouteElement:
```dart
VWidget(path: 'something', widget: SomeWidget(), name: 'deep')
```

And navigate using `toNamed`:
```dart
context.vRouter.toNamed('deep');
```

## Transitions

You can either specify a default transition in `VRouter`, or a custom one in `VWidget` or `VNester`

```dart
VRouter(
 // Default transition
 buildTransition: (animation1, _, child) => FadeTransition(opacity: animation1, child: child),
 routes: [
   // The custom ScaleTransition will play for '/user'
   VWidget(
     path: '/user',
     widget: UsersScreen(),
     buildTransition: (animation1, _, child) => ScaleTransition(scale: animation1, child: child),
   )
   // The default FadeTransition will play for '/settings'
   VWidget(path: '/settings', widget: SettingsScreen()),
 ],
)
```

# Much more

There is so much more that this package can do, check out the example
or have a look at the **[vrouter.dev](https://vrouter.dev)** website for more documentation and more examples.

Also don’t hesitate to [join us on discord](https://discord.gg/2mua42F66P) !
